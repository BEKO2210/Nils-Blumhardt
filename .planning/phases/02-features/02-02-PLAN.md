---
phase: 02-features
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - css/styles.css
  - js/gallery.js
autonomous: false

must_haves:
  truths:
    - "Klick auf Galerie-Bild öffnet Lightbox mit vergrößertem Bild"
    - "Lightbox kann geschlossen werden (X-Button, Escape, Overlay-Klick)"
    - "Navigation zwischen Bildern in Lightbox funktioniert (Pfeile, Tastatur)"
    - "Mobile Navigation funktioniert (Hamburger-Menü öffnet/schließt)"
  artifacts:
    - path: "js/gallery.js"
      provides: "Lightbox functionality, mobile menu toggle"
      min_lines: 50
    - path: "css/styles.css"
      provides: "Lightbox overlay, mobile menu styles"
      contains: "lightbox"
    - path: "index.html"
      provides: "Lightbox markup, script include"
      contains: "js/gallery.js"
  key_links:
    - from: ".galerie__item click"
      to: "lightbox overlay"
      via: "JavaScript event listener"
      pattern: "addEventListener.*click"
    - from: ".header__menu-toggle click"
      to: ".header__nav"
      via: "toggle class"
      pattern: "classList.toggle"
---

<objective>
Implement gallery lightbox and mobile navigation interactivity.

Purpose: Allow users to view project photos in detail and navigate the site on mobile devices.
Output: Working lightbox for gallery images and functional hamburger menu on mobile.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md

@index.html
@css/styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create gallery lightbox JavaScript</name>
  <files>js/gallery.js, index.html</files>
  <action>
    **Create js/gallery.js:**

    1. Lightbox functionality:
       - Get all gallery items (.galerie__item)
       - On click, open lightbox showing clicked image
       - Create lightbox overlay dynamically:
         - Full-screen fixed overlay with dark background (rgba(0,0,0,0.9))
         - Centered image (max-width: 90vw, max-height: 90vh)
         - Close button (X) in top-right corner
         - Previous/Next navigation arrows
         - Current image counter (e.g., "3 / 8")
       - Navigation:
         - Arrow buttons for prev/next
         - Keyboard: Left/Right arrows, Escape to close
         - Click on overlay (outside image) closes lightbox
       - Prevent body scroll when lightbox is open

    2. Since images are placeholders currently, store image data in a JavaScript array:
       ```javascript
       const galleryImages = [
         { src: 'images/projekt-1.jpg', alt: 'Fassadenanstrich Projekt' },
         { src: 'images/projekt-2.jpg', alt: 'Innenmalerarbeiten Projekt' },
         // ... etc
       ];
       ```
       For now, use placeholder references that will be replaced with real images later.

    3. Mobile menu toggle:
       - Get menu toggle button (.header__menu-toggle)
       - On click, toggle .header__nav--open class on nav
       - Update aria-expanded attribute
       - Close menu when clicking a nav link
       - Close menu when clicking outside

    **Update index.html:**
    - Add script tag before closing </body>: `<script src="js/gallery.js"></script>`

    AVOID:
    - Don't use jQuery or external libraries
    - Don't use inline onclick handlers
    - Don't forget keyboard accessibility
  </action>
  <verify>
    - js/gallery.js file exists with lightbox and menu code
    - Script is included in index.html
    - No JavaScript errors in console
  </verify>
  <done>
    JavaScript file created with lightbox and mobile menu functionality.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add lightbox and mobile menu CSS</name>
  <files>css/styles.css</files>
  <action>
    **Add Lightbox styles:**

    ```css
    /* Lightbox Overlay */
    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.95);
      z-index: 200;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition-normal), visibility var(--transition-normal);
    }

    .lightbox--open {
      opacity: 1;
      visibility: visible;
    }

    .lightbox__image {
      max-width: 90vw;
      max-height: 85vh;
      object-fit: contain;
    }

    .lightbox__close {
      position: absolute;
      top: var(--spacing-md);
      right: var(--spacing-md);
      /* White X button, 44px min touch target */
    }

    .lightbox__nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      /* Arrow buttons for prev/next */
    }

    .lightbox__counter {
      position: absolute;
      bottom: var(--spacing-md);
      left: 50%;
      transform: translateX(-50%);
      color: white;
    }
    ```

    **Add Mobile menu styles:**

    ```css
    /* Mobile Navigation (add to existing header styles) */
    .header__nav--open {
      display: block;
      position: absolute;
      top: var(--header-height);
      left: 0;
      right: 0;
      background-color: var(--color-bg);
      box-shadow: var(--shadow-lg);
      padding: var(--spacing-md);
    }

    .header__nav--open .header__nav-list {
      flex-direction: column;
      gap: 0;
    }

    .header__nav--open .header__nav-link {
      display: block;
      padding: var(--spacing-md);
      border-bottom: 1px solid var(--border-color);
    }
    ```

    Also add body.no-scroll to prevent scrolling when lightbox is open.

    IMPORTANT: Ensure styles work on mobile (375px) through desktop (1024px+).
  </action>
  <verify>
    - Lightbox styles present in styles.css
    - Mobile menu open state styles present
    - No horizontal scroll at any viewport size
  </verify>
  <done>
    CSS for lightbox overlay and mobile navigation menu is complete.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update gallery items with image data attributes</name>
  <files>index.html</files>
  <action>
    Update gallery items in #galerie section to include data attributes for lightbox:

    ```html
    <div class="galerie__item"
         tabindex="0"
         role="button"
         aria-label="Projektbild 1 vergrößern"
         data-index="0"
         data-src="images/projekt-1.jpg"
         data-alt="Fassadenanstrich Projekt">
      <div class="galerie__placeholder">Bild 1</div>
    </div>
    ```

    For all 8 gallery items:
    - Add data-index (0-7)
    - Add data-src with placeholder image path (images/projekt-N.jpg)
    - Add data-alt with descriptive text
    - Update role="button" for accessibility
    - Update aria-label to indicate the action

    Also add an images/ directory placeholder note or create the directory.

    Note: The actual images will be added later. For now, the lightbox can show placeholder or handle missing images gracefully.
  </action>
  <verify>
    - All 8 gallery items have data-index, data-src, data-alt attributes
    - role="button" and aria-label are present
    - HTML is valid
  </verify>
  <done>
    Gallery items are prepared for lightbox with proper data attributes and accessibility.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    - Lightbox for gallery images (click to open, keyboard navigation, close on X/Escape/overlay)
    - Mobile hamburger menu (toggles navigation, closes on link click)
    - WhatsApp floating button (from Plan 01)
  </what-built>
  <how-to-verify>
    1. Open index.html in browser
    2. **Mobile Menu Test (resize to <768px):**
       - Click hamburger icon → menu should slide open
       - Click a nav link → should scroll to section AND close menu
       - Click outside menu → should close
    3. **Gallery Lightbox Test:**
       - Click any gallery placeholder → lightbox should open
       - Press Left/Right arrows → should navigate between images
       - Press Escape OR click X OR click outside → should close
       - Counter should show "N / 8" correctly
    4. **WhatsApp Button Test:**
       - Verify green button visible in bottom-right corner
       - Click should open WhatsApp (or web.whatsapp.com)
    5. **General:**
       - No horizontal scroll at any viewport
       - No JavaScript errors in console
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] js/gallery.js exists with lightbox and menu code
- [ ] Script included in index.html
- [ ] Lightbox opens on gallery item click
- [ ] Lightbox closes on X, Escape, overlay click
- [ ] Navigation works (arrows, keyboard)
- [ ] Mobile menu toggles correctly
- [ ] No JavaScript console errors
- [ ] Human verification passed
</verification>

<success_criteria>
- All tasks completed
- Lightbox fully functional with keyboard accessibility
- Mobile navigation works on small screens
- Human verified visual and functional correctness
</success_criteria>

<output>
After completion, create `.planning/phases/02-features/02-02-SUMMARY.md`
</output>

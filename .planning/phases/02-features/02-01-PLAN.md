---
phase: 02-features
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - css/styles.css
autonomous: true

must_haves:
  truths:
    - "Kontaktformular sendet E-Mail via Formspree an N.Blumhardt@t-online.de"
    - "WhatsApp-Button öffnet Chat mit 0160 5972245"
    - "Erfolgsmeldung nach Formular-Absendung sichtbar"
  artifacts:
    - path: "index.html"
      provides: "Formspree action URL, WhatsApp floating button"
      contains: "formspree.io"
    - path: "css/styles.css"
      provides: "WhatsApp button styling, form submission states"
      contains: "whatsapp-btn"
  key_links:
    - from: "form.kontakt__form"
      to: "formspree.io endpoint"
      via: "form action attribute"
      pattern: 'action="https://formspree.io/f/'
    - from: "a.whatsapp-btn"
      to: "wa.me"
      via: "href attribute"
      pattern: 'href="https://wa.me/49160'
---

<objective>
Implement contact form with Formspree and WhatsApp floating button.

Purpose: Enable two primary contact channels - form submission via email and instant WhatsApp chat.
Output: Working Formspree integration and floating WhatsApp button with proper styling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md

@index.html
@css/styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate Formspree into contact form</name>
  <files>index.html</files>
  <action>
    1. Update the form element in #kontakt section:
       - Change action from "#" to "https://formspree.io/f/xyzforms" (placeholder - user will replace with actual endpoint)
       - Add hidden _subject field for email subject: "Neue Anfrage von blumhardtmaler.de"
       - Add hidden _next field to redirect back to page with success message (use #kontakt?success=true)
    2. Add name attributes matching Formspree expectations:
       - name → name (already exists)
       - email → _replyto (for reply-to functionality)
       - telefon → telefon
       - nachricht → message
    3. Add a success message div that will show after form submission:
       - Class: kontakt__success
       - Text: "Vielen Dank für Ihre Nachricht! Wir melden uns schnellstmöglich bei Ihnen."
       - Initially hidden, shown via CSS when URL contains ?success=true

    AVOID: Don't use JavaScript for form handling - Formspree handles everything server-side.
  </action>
  <verify>
    - Form has action="https://formspree.io/f/..."
    - Hidden fields _subject and _next exist
    - Success message div exists with class kontakt__success
  </verify>
  <done>
    Form is wired to Formspree with proper field names, subject line, and success redirect.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add floating WhatsApp button</name>
  <files>index.html, css/styles.css</files>
  <action>
    **HTML (index.html):**
    Add floating WhatsApp button before closing </body> tag:
    ```html
    <a href="https://wa.me/491605972245?text=Hallo%2C%20ich%20interessiere%20mich%20für%20Ihre%20Malerarbeiten."
       class="whatsapp-btn"
       target="_blank"
       rel="noopener noreferrer"
       aria-label="WhatsApp Chat starten">
      <svg viewBox="0 0 24 24" width="28" height="28" fill="currentColor">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
      </svg>
    </a>
    ```

    Note: German phone number format is +49 160 5972245 (without leading 0)
    Pre-filled message: "Hallo, ich interessiere mich für Ihre Malerarbeiten."

    **CSS (css/styles.css):**
    Add WhatsApp button styles at the end, before media queries:
    - Fixed position: bottom-right (24px from edges)
    - Green background (#25D366 - official WhatsApp green)
    - White icon color
    - Round shape (border-radius: full)
    - Size: 56px × 56px
    - Shadow for depth
    - Hover: scale up slightly
    - Z-index: 90 (below header but above content)
    - Ensure minimum touch target of 44px is met
  </action>
  <verify>
    - WhatsApp link opens correct URL with pre-filled message
    - Button is visible and positioned bottom-right
    - Button has correct green color and white icon
  </verify>
  <done>
    Floating WhatsApp button is visible on all pages, opens WhatsApp chat with correct number and pre-filled message.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add form success state styling</name>
  <files>css/styles.css</files>
  <action>
    Add CSS for form success message display:

    1. .kontakt__success class:
       - Hidden by default (display: none)
       - Background: light green (#ecfdf5)
       - Border: 1px solid success green (#22c55e)
       - Padding, rounded corners
       - Text centered, success color
       - Add checkmark icon via CSS ::before pseudo-element

    2. Show success message when URL has ?success=true:
       Use CSS only approach with :target selector for #kontakt section,
       OR add a small inline script that checks URL params and adds .show class.

       Since pure CSS can't read URL params, add minimal JavaScript:
       ```html
       <script>
       if(window.location.search.includes('success=true')) {
         document.querySelector('.kontakt__success')?.classList.add('kontakt__success--show');
       }
       </script>
       ```

    3. .kontakt__success--show:
       - display: block
       - Animation: fade-in
  </action>
  <verify>
    - Success message is hidden by default
    - Adding ?success=true to URL shows success message
    - Success message has appropriate styling (green theme)
  </verify>
  <done>
    Form submission feedback is implemented with visible success state after Formspree redirect.
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Form action points to Formspree endpoint (placeholder OK for now)
- [ ] Hidden fields _subject, _next, _replyto are present
- [ ] Success message div exists and styled
- [ ] WhatsApp button visible in bottom-right corner
- [ ] WhatsApp link has correct number (491605972245) and pre-filled message
- [ ] Both buttons meet 44px minimum touch target
- [ ] No horizontal scroll introduced
</verification>

<success_criteria>
- All tasks completed
- Form ready for Formspree (user just needs to replace endpoint ID)
- WhatsApp button functional with correct number format
- Success message displays after form submission redirect
</success_criteria>

<output>
After completion, create `.planning/phases/02-features/02-01-SUMMARY.md`
</output>
